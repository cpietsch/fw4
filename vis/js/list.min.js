function myListView(){function e(){}function t(e){var t=d3.mouse(this),n=a(t),i=g(n[0]-O,n[1]-O,{d:200,p:null},X);if(V=i.d,i.p&&!se){var e=i.p,r=[(e.x+O)*P+z[0],(E+e.y+O)*P+z[1]];B.center(r),le=e}q.style("cursor",function(){return i.d<5&&le.active?"pointer":"default"})}function n(e,t){re=!re;var n=d3.nest().key(function(e){return e.jahr}).entries(e);n.forEach(function(e){var n=T(+e.key),a=e.values.length;e.values.forEach(function(e,i){var r=Math.floor(i/U)+2;e.x=n+i%U*(Z/U),e.y=(t?1:-1)*(r*(Z/U)),e.x1=e.x*k+R/2,e.y1=e.y*k+R/2,0==e.sprite.position.x&&(e.sprite.position.x=e.x1,e.sprite.position.y=e.y1),e.sprite2&&(e.sprite2.position.x=e.x*C+G/2,e.sprite2.position.y=e.y*C+G/2),e.order=1*(a-i)})})}function a(e){var t=[0,0];return t[0]=e[0]/P-z[0]/P,t[1]=e[1]/P-E-z[1]/P,t}function i(){A.forEach(function(e,t){var n;n=e.x1-e.sprite.position.x,Math.abs(n)>.1&&(e.sprite.position.x+=.1*n),n=e.y1-e.sprite.position.y,Math.abs(n)>.1&&(e.sprite.position.y+=.1*n),n=e.alpha-e.sprite.alpha,Math.abs(n)>.01&&(e.sprite.alpha+=.2*n),e.sprite.visible=e.sprite.alpha>.1,e.sprite2&&(n=e.alpha2-e.sprite2.alpha,Math.abs(n)>.01&&(e.sprite2.alpha+=.2*n),e.sprite2.visible=e.sprite2.alpha>.1)})}function r(e){requestAnimationFrame(r),TWEEN.update(e),y(),i(),L.render(D),H.update()}function o(e,t){B.center(null),x(e),d3.select(".tagcloud").classed("hide",!0);var n=T.rangeBand()/3/2,a=b/8,i=.6/(T.rangeBand()/3/b),r=[-i*(e.x-n)-a,-i*(E+e.y)];de=i,setTimeout(function(){c(e)},t/2),W.call(B.translate(z).event).transition().duration(t).call(B.scale(i).translate(r).event).each("end",function(){se=!0,le=e,c(e),l(e),s(e)})}function l(e){logger.log({action:"zoomToDetail",target:e.id}),ie.classed("hide",!1).select(".inner").html(ae(e));var t=ie.select(".thementexte").text(e.thementexte.length?"":"Keine").selectAll("a").data(e.thementexte);t.enter().append("a"),t.exit().remove(),t.attr("href",function(e){return"thementexte/"+e.file}).attr("target","_blank").attr("title","zum PDF").text(function(e){return e.full_title})}function s(e,t){var n=new Image;n.addEventListener("load",function(){var t=new PIXI.BaseTexture(n),a=new PIXI.Texture(t),i=new PIXI.Sprite(a);i.anchor.x=.5,i.anchor.y=.5,i.position.x=e.x*M+K/2,i.position.y=e.y*M+K/2,i._data=e,e.big=!0,ne.addChild(i)}),n.crossOrigin="",n.src="https://s3.eu-central-1.amazonaws.com/fw4/large/"+e.id+".jpg"}function d(){for(;ne.children[0];)ne.children[0]._data.big=!1,ne.removeChild(ne.children[0])}function c(e){A.forEach(function(t){t.id!==e.id&&(t.alpha=0,t.alpha2=0)})}function u(){A.forEach(function(e){e.alpha=e.active?1:.2,e.alpha2=e.visible?1:0})}function p(e,t){S.forEach(function(t){t.pos=(T(t.key)-e)*P,t.visible=t.pos>-Z*P&&t.pos<b+100}),F.attr("class","timeline "+pe(P)),F.style("font-size",function(){var e=2*P;return e+"px"});var n=F.selectAll(".container").data(S),a=n.enter().append("div").classed("container",!0);a.append("div").classed("year",!0).text(function(e){return e.key});var i=a.append("div").classed("entries",!0).selectAll(".entry").data(function(e){return e.values}).enter().append("div").classed("entry",!0);i.append("div").classed("small",!0).append("div").classed("title",!0).text(function(e){return e.titel});var r=i.append("div").classed("middle",!0);r.append("div").classed("title",!0).text(function(e){return e.titel}),r.append("div").classed("text",!0).text(function(e){return e.text+"."});var o=i.append("div").classed("large",!0);o.append("div").classed("title",!0).text(function(e){return e.titel}),o.append("div").classed("text",!0).html(function(e){return e.text+".<br><br>"+e.extra}),n.style("transform",function(e){return"translate("+e.pos+"px,0px)"}).style("height",Z*P+"px").style("width",Z*P+"px").style("display",function(e){return e.visible?"block":"none"}),n.select(".year").style("font-size",ue(P)+"px")}function f(){z=d3.event.translate,P=d3.event.scale;var e=-1*z[0]/P,t=e+b/P,n=(z[1]+E*P,-me[1]-ge),a=(n-E)*P+E;me[0]-ge;null!=d3.event.sourceEvent&&(0>e?z[0]=0:t>b&&(z[0]=-1*(b*P-b)),z[1]<a&&(z[1]=a),B.translate([z[0],z[1]]),e=-1*z[0]/P,t=e+b/P),0!=de&&P>de&&!se&&(se=!0,B.center(null),de=P,c(le),l(le)),se&&de-20>P&&(se=!1,u(),d(),ie.classed("hide",!0).classed("sneak",!1)),p(e,t);var i=E*P- -1*z[1]-N*P;F.style("transform","translate(0px,"+i+"px)"),P>ce?d3.select(".tagcloud").classed("hide",!0):d3.select(".tagcloud").classed("hide",!1),$.scale.x=d3.event.scale,$.scale.y=d3.event.scale,$.x=d3.event.translate[0],$.y=d3.event.translate[1]}function h(e){ve=!0,fe=z,he=P}function v(e){J=z!==fe,ve=!1,m(),logger.log({action:"zoomend",translate:z,scale:P,target:le?le.id:""}),se&&!le.big&&.1>he-P&&s(le)}function g(e,t,n,a){var i=a.x1,r=a.y1,o=a.x2,l=a.y2;if(a.visited=!0,e<i-n.d||e>o+n.d||t<r-n.d||t>l+n.d)return n;var s=a.point;if(s){s.scanned=!0;var d=s.x-e,c=s.y-t,u=Math.sqrt(d*d+c*c);u<n.d&&(n.d=u,n.p=s)}var p=a.nodes,f=2*e>i+o,h=2*t>r+l;return p[2*h+f]&&(n=g(e,t,n,p[2*h+f])),p[2*h+(1-f)]&&(n=g(e,t,n,p[2*h+(1-f)])),p[2*(1-h)+f]&&(n=g(e,t,n,p[2*(1-h)+f])),p[2*(1-h)+(1-f)]&&(n=g(e,t,n,p[2*(1-h)+(1-f)])),n}function m(){var e=P;if(!se){A.forEach(function(t,n){var a=t.sprite.position,i=a.x/k+z[0]/e,r=a.y/k+z[1]/e,o=5;i>-o&&b/e+o>i&&E/e+o>r+E&&r>-1*E-o?t.visible=!0:t.visible=!1});var t=A.filter(function(e){return e.visible});t.length<50?A.forEach(function(e){e.visible&&e.loaded&&e.active?e.alpha2=1:e.visible&&!e.loaded&&e.active?loadImagesCue.push(e):e.alpha2=0}):A.forEach(function(e){e.alpha2=0})}}function x(e){if(e.loaded)return void(e.alpha2=1);if(imagesMap2.get(e.id)){var t=new Image;t.addEventListener("load",function(){var n=new PIXI.BaseTexture(t),a=new PIXI.Texture(n),i=new PIXI.Sprite(a);i.anchor.x=.5,i.anchor.y=.5,i.position.x=e.x*C+G/2,i.position.y=e.y*C+G/2,i._data=e,te.addChild(i),e.sprite2=i,e.alpha2=e.highlight}),e.loaded=!0,t.src="data:image/jpg;base64,"+imagesMap2.get(e.id).image}}function y(){if(!ve&&!se&&loadImagesCue.length){var e=loadImagesCue.pop();imagesMap2&&!e.loaded&&x(e)}}var I={top:20,right:50,bottom:30,left:50},w=400,b=window.innerWidth-I.left-I.right,E=window.innerHeight<w?w:window.innerHeight,k=1,C=1,M=1,z=[0,0],P=1;window.scale=P;var X,S=d3.range(1810,1857).map(function(e){return{key:e}}),T=d3.scale.ordinal().rangeBands([I.left,b+I.left],.2).domain(S.map(function(e){return e.key})),j=d3.geom.quadtree().x(function(e){return e.x}).y(function(e){return e.y}),B=d3.behavior.zoom().scaleExtent([1,450]).on("zoom",f).on("zoomend",v).on("zoomstart",h);d3.select("body");var q,A,L,D,H,W,F,O,Z=0,N=0,R=100,G=1e3,K=4e3,U=3,V=0,J=!1;_.templateSettings.interpolate=/{{([\s\S]+?)}}/g;var Q,Y,D,$,ee,te,ne,ae=_.template(d3.select("#detailTemplate").html()),ie=d3.select(".sidebar").on("mouseenter",function(e){logger.log({action:"enter",scale:P,target:"detail"})}).on("mouseleave",function(e){logger.log({action:"exit",scale:P,target:"detail"})});e.loadTimeline=function(e){e.forEach(function(e){e.jahr=e.jahr.split("-")[0],e.jahr=1*e.jahr}),Y=e,Y.forEach(function(e){0==S.filter(function(t){return t.key==e.jahr}).length&&S.push({key:e.jahr})}),S.sort(function(e,t){return e.key-t.key}),T.domain(S.map(function(e){return e.key})),S.forEach(function(e){e.values=Y.filter(function(t){return t.jahr==e.key}),e.id=e.key})},e.resize=function(){b=window.innerWidth-I.left-I.right,E=window.innerHeight<w?w:window.innerHeight,L.resize(b+I.left+I.right,E),e.makeScales(),e.flip()},e.makeScales=function(){T.rangeBands([I.left,b+I.left],.2),Z=T.rangeBand(),N=T.rangeBand()/3,O=Z/U/2,k=R/(T.rangeBand()/U),C=G/(T.rangeBand()/U),M=K/(T.rangeBand()/U),ee.scale.x=1/k,ee.scale.y=1/k,ee.y=E,te.scale.x=1/C,te.scale.y=1/C,te.y=E,ne.scale.x=1/M,ne.scale.y=1/M,ne.y=E},e.init=function(n){A=n,q=d3.select(".page").append("div").classed("viz",!0),PIXI.SCALE_MODES.DEFAULT=PIXI.SCALE_MODES.NEAREST;var a={transparent:!1,resolution:1,antialiasing:!1};L=new PIXI.WebGLRenderer(b+I.left+I.right,E,a),window.renderer=L,L.backgroundColor=1842719;var i=d3.select(q.node().appendChild(L.view));H=new Stats,document.body.appendChild(H.domElement),D=new PIXI.Container,$=new PIXI.Container,ee=new PIXI.Container,te=new PIXI.Container,ne=new PIXI.Container,D.addChild($),$.addChild(ee),$.addChild(te),$.addChild(ne),A.forEach(function(e,t){var n=PIXI.Texture.fromImage("data:image/jpg;base64,"+imagesMap.get(e.id).image),a=new PIXI.Sprite(n);a.anchor.x=.5,a.anchor.y=.5,a._data=e,e.sprite=a,ee.addChild(a)}),e.makeScales(),d3.select(".viz").call(B).on("mousemove",t).on("click",function(){(!le||le.id)&&(J||V>15||(!le||le.active)&&(Math.abs(de-P)<.1?(logger.log({action:"zoomback",scale:P,target:le?le.id:""}),e.resetZoom()):(logger.log({action:"zoomto",scale:P,target:le?le.id:""}),o(le,1400/Math.sqrt(Math.sqrt(P))))))}),W=i,F=d3.select(".viz").append("div").classed("timeline",!0).style("transform","translate(0px,"+(E-30)+"px)"),e.flip(),r()};var re=!1;e.distance=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},e.click=function(e){},e.mousemove=function(t){if(!cloud.lock){var n=d3.mouse(this),a=[t.point.x,t.point.y];e.distance(n,a)}},e.mouseover=function(e){if(!cloud.lock){var e=e.point;le=e;var t=[(e.x+Z/3/2)*P+z[0],(E+e.y+Z/3/2)*P+z[1]];B.center(t)}},e.mouseout=function(e){cloud.lock||(ce>P&&cloud.mouseleave(),Q.hide())},e.mousedown=function(e){if(!J){var e=e.point;J||o(e,1e3/Math.sqrt(Math.sqrt(P)))}};var oe="";e.clearSearch=function(){oe=""};var le=null,se=!1,de=0,ce=2,ue=d3.scale.linear().domain([1,9]).range([9,20]).clamp(!0),pe=(d3.scale.linear().domain([2,8,20]).range([9,14,19]).clamp(!0),d3.scale.threshold().domain([3,10,20]).range(["none","small","middle","large"])),fe=[0,0],he=0,ve=!1;e.highlight=function(){A.forEach(function(e,t){e.alpha=e.highlight?1:.2})};var ge=40,me=[0,0];e.resetZoom=function(){var e=1400;me=d3.extent(A,function(e){return e.y});var t=-me[1]-ge;W.call(B.translate(z).event).transition().duration(e).call(B.scale(1).translate([0,t]).event)},e.flip=function(){e.split(),e.resetZoom()},e.split=function(){var e=A.filter(function(e){return e.active});n(e,!1);var t=A.filter(function(e){return!e.active});n(t,!0),S.forEach(function(e){e.x=T(e.key)+Z/3,e.y=5}),X=j(S.concat(A))},loadImagesCue=[];return e}var cachedModules=[];
//# sourceMappingURL=UGLIFY_SOURCE_MAP_TOKEN