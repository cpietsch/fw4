<!DOCTYPE html>
<html>
<meta charset="utf-8">
<link rel="stylesheet" href="style.css">

<link rel="author" href="chrispie.com">
<link rel="publisher" href="chrispie.com"/>

<body>
<script src="js/d3.v3.min.js"></script>
<script src="js/lodash.min.js"></script>
<script src="js/pixi.min.js"></script>
<script src="js/stats.min.js"></script>
<script src="js/loader.js"></script>
<script src="js/list.js"></script>
<script src="js/tags.js"></script>
<script src="js/utils.js"></script>
<script src="js/Tween.js"></script>

<div id="hiddenreload"></div>


<div id="detailTemplate" class="detail" style="display:none;">
  <div class="inner">
    <h1>{{ bezeichnungen ? bezeichnungen : "Kein Titel" }}</h1>
    <p class="label">Beschreibung</p>
    <p class="description">{{ beschreibung }}</p>
    <p class="label">Kommentar</p>
    <p class="description comment">{{ kommentar }}</p>
    <!-- <p class="info">zur <a target="_blank" href="http://bestandskataloge.spsg.de/FWIV/{{ id }}">spsg.de</a></p> -->
    <p class="info"><span>Bezeichnungen:</span><span>{{ bezeichnungen ? bezeichnungen : "Keine Bezeichnungen" }}</span></p>
    <p class="info"><span>Datierung:</span><span>{{ zeit }}</span></p>
    <p class="info"><span>Material:</span><span>{{ material }}</span></p>
    <p class="info"><span>Maße:</span><span>{{ hoehe }}mm * {{ breite }}mm</span></p>
    <p class="info"><span>Thementexte:</span><span>{{ thementexte }}</span></p>
    <p class="info"><span>Stichworte:</span><span>{{ keywords.join(", ") }}</span></p>
    <p class="info"><span>Inventarnr.:</span><span>{{ id }}</span></p>
    <p class="info"><span>Literatur:</span><span>{{ literatur ? literatur : "Keine Literatur" }}</span></p>
    
    
  </div>
</div>

<div class="search">Suche</div>
<div class="page">
  
  <div id="render" class="detail hide"></div>
</div>


<div class="splash" >
  <div class="center">
    <p>Welcome to the vikus prototype.</p>
    <p>You are now viewing historical drawings of Friedrich Wilhelm IV of Prussia from 1810 - 1856</p>
    <p>Every drawing is previewed in a small picture located at its creation timeframe. Zoom in to discover details.</p>
    <p>Select a keyword at the top to filter the collection and the keyword list itself.</p>
    <div class="btn">GOT IT</div>
    <div class="credits">
      <p>Design and implementation: Christopher Pietsch</p>
      <p>Theory and Research: Katrin Glinka</p>
      <p>Scientific supervision: Prof. Dr. Marian Dörk</p>
      <p>Data: Stiftung Preußische Schlösser und Gärten</p>
      </div>
  </div>
</div>

<script>

// copyright christopher pietsch
// cpietsch@gmail.com
// www.chrispie.com
// 2015

var data;
var imagesMap;
var imagesMap2 = d3.map([]);

var c = console.log.bind(console);

var cloud = myTagCloud();
var list = myListView();

var ping = utils.ping();


d3.csv("data/timeline.csv", function(timeline){
d3.csv("data/spsg.csv", function(data){
// Loader("data/spsg.csv").finished(function(data){
// Loader("data/neu_100.csv").finished(function(images){


  window.data = data;

  // c(data[0]);

  // data cleaning
  utils.clean(data);

  imagesMap = d3.map(utils.fakeDataSmall(data), function(d){ return d.id; });
  // imagesMap = d3.map(images, function(d){ return d.id; });
  imagesMap2 = d3.map(utils.fakeDataBig(data), function(d){ return d.id; });

  // Loader("data/neu_1000.csv").finished(function(images2){
  //   imagesMap2 = d3.map(images2, function(d){ return d.id; });
  // });


  cloud.init(data);
  
  list.loadTimeline(timeline);
  list.init(data);


  cloud.mouseenterCallback(function(d){
    list.highlight(d);
  })

  cloud.mouseclickCallback(function(d){
    list.flip(d);
  })


 
// });
});
});

d3.select("#hiddenreload").on("click", function(){
  location.reload();
})

d3.select(".splash .btn").on("click", function(){
  d3.select(".splash").style({ display: "none" });
  //utils.fullscreen();
})

</script>

</body>
</html>